<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">

<html xml:lang="en" lang="en" xmlns="http://www.w3.org/1999/xhtml">

  <head>
    <title>Webby Tricks - JQuery - Isaac Liu's Website</title>
    <meta name="keywords" content="isaac liu, PRET, real-time systems, computer architecture, basketball, isaac, liu, berkeley, UCB, Precision Timed Machine, liuisaac, isaacliu, JQuery, Javascript, webby, web design, life" />
    <meta content="application/xhtml+xml; charset=UTF-8" http-equiv="content-type" />
    <meta name="author" content="Isaac Liu" />
    <meta name="description" content="Isaac Liu is currently a Ph.D student at the University of California, Berkeley in the EECS department. He is part of the CHESS (Center for Hybrid and Embedded Software System) group advised by Edward A. Lee. His research interests are in real time systems, parallel architectures and programming models. His current research project is on real time computer architectures (PREcision Timed Machines â€“ PRET)." />
    

    <link href="../../css/screen.css" rel="stylesheet" type="text/css" media="screen" />

    <script src="../../scripts/jquery.min.js" type="text/javascript"></script>
    <script src="../../scripts/jquery.timeago.js" type="text/javascript"></script>
    <script type="text/javascript">
//<![CDATA[
      // initialize plugin code
      jQuery(document).ready(function() {
      jQuery("abbr.timeago").timeago();
      });
//]]>
    </script>

    <script src="http://www.google.com/jsapi?key=ABQIAAAAdrBnqlMHA9CUol9CpTYD2BQ_TdDJkbSLLkq43zUs0P1h9NacAxSpxdihNgcN_PfO5fdIAxIbBjoxeg" type="text/javascript"></script>
    <script type="text/javascript">
    google.load("feeds", "1");
    </script>

  </head>
  <body>
    <!-- header starts-->
    <div id="header-wrap"><div class="container_16" id="header">						
	
	<!-- navigation -->
	<div id="nav">
	  <ul>
	    
	    
	    <li><a href="http://www.isaacliu.info/index.html">Home</a></li>
	    
	    <li><a href="http://www.isaacliu.info/personal.html">Personal</a></li>
	    
	    <li><a href="http://www.isaacliu.info/publications.html">Publications</a></li>
	    
	    <li><a href="http://www.isaacliu.info/research.html">Research</a></li>
	    
	    <li><a href="http://www.isaacliu.info/resume.html">Resume</a></li>
	    
	  </ul>		
	</div>		
	
	<div id="feed-icon-link">
	  <a href="http://www.isaacliu.info/blog/rss.xml"> <img src="../../images/icons/feed.png" id="feed-icon" alt="feed" /></a>  
	</div>
 	
	<form method="get" action="index.html" id="quick-search">
	  <p>
	    <label for="qsearch">Search:</label>
	    <input name="qsearch" class="tbox" title="Start typing and hit ENTER" id="qsearch" type="text" value="This does nothing right now..." />
	    <input name="searchsubmit" class="btn" title="Search" src="../../images/search.gif" type="image" alt="Search" />
	  </p>
	</form>					

	<!-- header ends here -->
    </div></div>
    
    <!-- content starts -->
    <div id="content-outer"><div class="container_16" id="content-wrapper">
	
	<!-- main -->
	<div class="grid_11 alpha" id="main">

          <div class="post" id="webby-tricks-jquery-posthead">
  <div class="posthead">
        <h2 class="posttitle">
            <a href="http://www.isaacliu.info/blog/201004/webby-tricks-jquery.html">Webby Tricks - JQuery</a>
          </h2>
    
            <p class="postdate">
      <strong class="day">26th</strong>
      <strong class="month">Apr</strong>
      <strong class="year">2010</strong>
    </p>

    
    <div class="postmeta"> 
      <span class="post-comment"><a href="http://www.isaacliu.info/blog/201004/webby-tricks-jquery.html#disqus_thread">Comments</a></span>&nbsp;
      <span class="post-filed"><!-- insert tags --></span>
    </div>
  </div> <!-- end posthead -->
    <div class="postcontents" id="webby-tricks-jquery-content">
                    <p>Since I&#8217;ve had such a positive experience with <a href="http://webby.rubyforge.org/">Webby</a>, I&#8217;ve decided to blog a little about some stuff I&#8217;ve figured out when using <em>webby</em>. I know there are some amount of tutorial I&#8217;ve found only for Webby, so I&#8217;ll try to not repeat a lot of them. When I constructed this blog using webby, I wanted the dates to be in the format of <em>&#8220;2 minutes ago&#8221;</em> or <em>&#8220;1 month ago,&#8221;</em> instead of absolute dates. This cannot be achieved by using webby alone, since these dates can only be changed when the website is build. Thus, a little java script magic is needed. <a href="http://jquery.com/">JQuery</a> is a javascript library that allows plugins and has several AJAX functions. In particular, I&#8217;m using the <a href="http://timeago.yarp.com/">Timeago</a> plugin for JQuery. What this javascript does is turn any date you wish on your page into the &#8220;timeago&#8221; format. It also auto updates itself, so it&#8217;s perfect to be used with webby. First you want to follow the links above and download both the plugin and JQuery (go ahead and get the min version). In your main layout page (in the <em>layouts</em> folder), add the following lines between the &lt;head&gt; tags:</p>
<div class="CodeRay">
<pre><span class="no">1</span> <span class="ta">&lt;script</span> <span class="an">src</span>=<span class="s"><span class="dl">&quot;</span><span class="k">/scripts/jquery.min.js</span><span class="dl">&quot;</span></span> <span class="an">type</span>=<span class="s"><span class="dl">&quot;</span><span class="k">text/javascript</span><span class="dl">&quot;</span></span><span class="ta">&gt;</span><span class="ta">&lt;/script&gt;</span>
<span class="no">2</span> <span class="ta">&lt;script</span> <span class="an">src</span>=<span class="s"><span class="dl">&quot;</span><span class="k">/scripts/jquery.timeago.js</span><span class="dl">&quot;</span></span> <span class="an">type</span>=<span class="s"><span class="dl">&quot;</span><span class="k">text/javascript</span><span class="dl">&quot;</span></span><span class="ta">&gt;</span><span class="ta">&lt;/script&gt;</span>
<span class="no">3</span> <span class="ta">&lt;script</span> <span class="an">type</span>=<span class="s"><span class="dl">&quot;</span><span class="k">text/javascript</span><span class="dl">&quot;</span></span><span class="ta">&gt;</span>
<span class="no">4</span>   // initialize plugin code
<span class="no">5</span>   jQuery(document).ready(function() {
<span class="no">6</span>   jQuery(&quot;abbr.timeago&quot;).timeago();
<span class="no">7</span>   });
<span class="no">8</span> <span class="ta">&lt;/script&gt;</span>
</pre>
</div><p>When using webby, I created a <em>scripts</em> folder in my <em>contents</em> folder to hold my javascripts. That&#8217;s why the src of the &lt;scripts&gt; tag is <em>/scripts/jquery.*</em>. After doing this, then the javascript will find all the tags with the following format:</p>
<div class="CodeRay">
<pre><span class="no">1</span> <span class="ta">&lt;abbr</span> <span class="an">class</span>=<span class="s"><span class="dl">&quot;</span><span class="k">timeago</span><span class="dl">&quot;</span></span> <span class="an">title</span>=<span class="s"><span class="dl">&quot;</span><span class="k">2008-07-17T09:24:17Z</span><span class="dl">&quot;</span></span><span class="ta">&gt;</span>July 17, 2008<span class="ta">&lt;/abbr&gt;</span>
</pre>
</div><p>into this:</p>
<div class="CodeRay">
<pre><span class="no">1</span> <span class="ta">&lt;abbr</span> <span class="an">class</span>=<span class="s"><span class="dl">&quot;</span><span class="k">timeago</span><span class="dl">&quot;</span></span> <span class="an">title</span>=<span class="s"><span class="dl">&quot;</span><span class="k">July 17, 2008</span><span class="dl">&quot;</span></span><span class="ta">&gt;</span>about a year ago<span class="ta">&lt;/abbr&gt;</span>
</pre>
</div><p>which will yields the following: <strong><abbr title="2008-07-17T09:24:17Z" class="timeago">July 17, 2008</abbr></strong>. Notice the time format in the &lt;abbr&gt; tag must be in an <a href="http://en.wikipedia.org/wiki/ISO_8601">ISO8691</a> timestamp. When using <em>webby</em>, since you can use the erb filter, there are several ways to turn dates into the correct format. Here I show one way i used:</p>
<div class="CodeRay">
<pre><span class="no"> 1</span> <span class="il"><span class="idl">&lt;%</span>  recent = <span class="iv">@pages</span>.find(
<span class="no"> 2</span>        <span class="sy">:limit</span> =&gt; <span class="i">6</span>,
<span class="no"> 3</span>        <span class="sy">:content_type</span> =&gt; <span class="s"><span class="dl">'</span><span class="k">tumblog</span><span class="dl">'</span></span>,
<span class="no"> 4</span>        <span class="sy">:sort_by</span> =&gt; <span class="sy">:created_at</span>,
<span class="no"> 5</span>        <span class="sy">:reverse</span> =&gt; <span class="pc">true</span>
<span class="no"> 6</span>    )
<span class="no"> 7</span>    recent.each <span class="r">do</span> |e| <span class="idl">-%&gt;</span></span>;
<span class="no"> 8</span> <span class="ta">&lt;li&gt;</span><span class="il"><span class="idl">&lt;%=</span> link_to_page(e); <span class="idl">%&gt;</span></span>
<span class="no"> 9</span> <span class="ta">&lt;div</span> <span class="an">class</span>=<span class="s"><span class="dl">&quot;</span><span class="k">date</span><span class="dl">&quot;</span></span><span class="ta">&gt;</span>[ <span class="ta">&lt;abbr</span> <span class="an">class</span>=<span class="s"><span class="dl">&quot;</span><span class="k">timeago</span><span class="dl">&quot;</span></span> <span class="an">title</span>=<span class="s"><span class="dl">&quot;</span><span class="il"><span class="idl">&lt;%=</span> e.created_at.utc.strftime(<span class="s"><span class="dl">&quot;</span><span class="k">%Y-%m-%dT%H:%M:%SZ</span><span class="dl">&quot;</span></span>) <span class="idl">%&gt;</span></span><span class="dl">&quot;</span></span><span class="ta">&gt;</span><span class="il"><span class="idl">&lt;%=</span> e.created_at.strftime(<span class="s"><span class="dl">&quot;</span><span class="k">%b %d, %Y</span><span class="dl">&quot;</span></span>) <span class="idl">%&gt;</span></span><span class="ta">&lt;/abbr&gt;</span> ]<span class="ta">&lt;/div&gt;</span><span class="ta">&lt;/li&gt;</span>
<span class="no"><strong>10</strong></span> <span class="il"><span class="idl">&lt;%</span> <span class="r">end</span> <span class="idl">-%&gt;</span></span>  
</pre>
</div><p>The above code is what I used for the right column <em>recent entries</em> section. I find all pages that are blog entries, and print out the linke and publish date. In particular, I used the following code to turn webby blog date format to the correct timestamp format. As you can see, all the dates on the right column are parsed into the &#8220;timeago&#8221; format.</p>
<div class="CodeRay">
<pre><span class="no">1</span> <span class="il"><span class="idl">&lt;%=</span> e.created_at.utc.strftime(<span class="s"><span class="dl">&quot;</span><span class="k">%Y-%m-%dT%H:%M:%SZ</span><span class="dl">&quot;</span></span>) <span class="idl">%&gt;</span></span>
</pre>
</div><p>As usual, all the source code for this website can be found in my <a href="http://github.com/iliu/My-Site">github</a> repository. Feel free to check it out and play with it.</p>
		
  </div>
</div>



<div class="postothers">
  <div id="disqus_thread"></div>
  <script type="text/javascript">
  /**
    * var disqus_identifier; [Optional but recommended: Define a unique identifier (e.g. post id or slug) for this thread] 
    */
    var disqus_developer = 1;
  (function() {
   var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
   dsq.src = 'http://isaacliu.disqus.com/embed.js';
   (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript=isaacliu">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
</div>




	  <!-- main ends -->
	</div>
	<!-- left-columns starts -->
 	<div class="grid_5 omega" id="left-columns"> 
	  <div class="featured-post">
	    <p><img class="float-left" src="../../images/me.jpg" height="94" alt="my pic" width="80" /> <strong>Isaac Liu</strong> is currently a Ph.D student at the <a href="http://berkeley.edu/">University of California, Berkeley</a> in the <a href="http://www.eecs.berkeley.edu/">EECS</a> department. He is part of the <a href="http://chess.eecs.berkeley.edu/">CHESS</a> (Center for Hybrid and Embedded Software System) group advised by <a href="http://ptolemy.eecs.berkeley.edu/~eal/">Edward A. Lee</a>. His research interests are in real time systems, parallel architectures and programming models. His current research project is on real time computer architectures (<a href="http://chess.eecs.berkeley.edu/pret/">PREcision Timed Machines &#8211; PRET</a>).<br />
<a href="http://www.isaacliu.info/personal.html">read more&#8230;</a></p>
<p><strong>office</strong> 545K Cory Hall, Berkeley, CA<br />
<strong>email</strong> liuisaac (at) berkeley (dot) edu <br />
<strong>cv</strong> <a href="http://www.isaacliu.info/resume.html">html</a> / <a href="http://www.isaacliu.info/docs/resume.pdf">pdf</a> [ <em>updated: 1/31/08</em> ]<br />
<strong>others</strong> <a href="http://www.facebook.com/isaacliu"><img class="icons" title="facebook" src="../../images/icons/facebook.png" alt="facebook" /></a> <a href="http://www.linkedin.com/pub/isaac-liu/9/996/6a0"><img class="icons" title="linkedin" src="../../images/icons/linkedin.png" alt="linkedin" /></a> <a href="http://twitter.com/isaacliu"><img class="icons" title="twitter" src="../../images/icons/twitter.png" alt="twitter" /></a> <a href="http://picasaweb.google.com/liu.isaac"><img class="icons" title="picasa" src="../../images/icons/picasa.png" alt="picasa" /></a> <a href="http://github.com/iliu"><img class="icons" title="github" src="../../images/icons/github.png" alt="github" /></a></p>
	  </div>
	  <div class="featured-post">
	    <script src="../../scripts/twitterwidget.js" type="text/javascript"></script>
<script type="text/javascript">
//<![CDATA[
new TWTR.Widget({
  version: 2,
  type: 'profile',
  rpp: 4,
  interval: 6000,
  width: 250,
  height: 250,
  theme: {
    shell: {
      background: '#EFFAE6',
      color: '#7BA857'
    },
    tweets: {
      background: '#ffffff',
      color: '#666666',
      links: '#AE855C'
    }
  },
  features: {
    scrollbar: true,
    loop: false,
    live: false,
    hashtags: false,
    timestamp: true,
    avatars: false,
    behavior: 'all'
  }
}).render().setUser('isaacliu').start();
 //]]>
</script> 


	  </div>
	  <div class="featured-post">
	    <h4> Recent Blog Entries </h4>
<ul class="footer-list">
<li>
  <div class="date">[ <abbr title="2010-09-17T05:15:06Z" class="timeago">Sep 17, 2010</abbr> ]</div>
  <a href="http://www.isaacliu.info/blog/201009/ror-and-facebook-with-fb-graph.html">RoR and Facebook With fb_graph</a>
</li>
  <li>
  <div class="date">[ <abbr title="2010-04-28T16:07:09Z" class="timeago">Apr 28, 2010</abbr> ]</div>
  <a href="http://www.isaacliu.info/blog/201004/zoom-1-ie-fix.html">Zoom:1 IE Fix</a>
</li>
  <li>
  <div class="date">[ <abbr title="2010-04-26T16:44:52Z" class="timeago">Apr 26, 2010</abbr> ]</div>
  <a href="http://www.isaacliu.info/blog/201004/webby-tricks-jquery.html">Webby Tricks - JQuery</a>
</li>
  <li>
  <div class="date">[ <abbr title="2010-04-25T15:54:33Z" class="timeago">Apr 25, 2010</abbr> ]</div>
  <a href="http://www.isaacliu.info/blog/201004/birthday-freebies.html">Birthday Freebies!</a>
</li>
  <li>
  <div class="date">[ <abbr title="2010-04-23T21:16:50Z" class="timeago">Apr 23, 2010</abbr> ]</div>
  <a href="http://www.isaacliu.info/blog/201004/crawling-up-the-ranks.html">Crawling up the Ranks</a>
</li>
  <li>
  <div class="date">[ <abbr title="2010-04-20T18:30:22Z" class="timeago">Apr 20, 2010</abbr> ]</div>
  <a href="http://www.isaacliu.info/blog/201004/welcome-layton.html">Welcome Layton!</a>
</li>
    

</ul>
<a href="http://www.isaacliu.info/blog/" class="left-columns-archive float-right">Archive...</a>

	  </div>
	  <!-- end left-columns -->
	</div>		
	<!-- contents end here -->	
    </div></div>

    <!-- footer starts here -->	
    <div class="container_12" id="footer-wrapper">
      
      <div id="footer-content">
	
	<div class="grid_4">
	  <a href="http://github.com/iliu/My-Site/commits/master.atom" class="float-right" style="margin-top: 17px; margin-right: 20px;"><img class="plain-img" src="../../images/icons/rss.png" alt="rss" /></a>
<h3>Recent Changes</h3>
<script type="text/javascript">
//<![CDATA[
    function initialize() {
      var feed = new google.feeds.Feed("http://github.com/iliu/My-Site/commits/master.atom");
      feed.load(function(result) {
        if (!result.error) {
          var container = document.getElementById("githubfeed");
          var listcontainer = document.createElement("ul");
          listcontainer.className = "footer-list";
          for (var i = 0; i < result.feed.entries.length; i++) {
            var entry = result.feed.entries[i];
            var div = document.createElement("div");
            var li = document.createElement("li");
            var a = document.createElement("a");
            a.appendChild(document.createTextNode(entry.title));
            a.href = entry.link;
	    div.appendChild(document.createTextNode("[ " + (jQuery.timeago(new Date(entry.publishedDate))) + " ]")); 
            li.appendChild(div);
            li.appendChild(a);
            listcontainer.appendChild(li);
          }
          container.appendChild(listcontainer);
        }
      });
    }
    google.setOnLoadCallback(initialize);
 //]]>
</script>
<div class="footer-wrapper" id="githubfeed"></div>



	</div>

	<div class="grid_4">
	  <h3>Image Gallery </h3>					
<p class="thumbs">
  <a href="index.html"><img src="../../images/thumb.jpg" height="40" alt="thumbnail" width="40" /></a>
  <a href="index.html"><img src="../../images/thumb.jpg" height="40" alt="thumbnail" width="40" /></a>
  <a href="index.html"><img src="../../images/thumb.jpg" height="40" alt="thumbnail" width="40" /></a>
  <a href="index.html"><img src="../../images/thumb.jpg" height="40" alt="thumbnail" width="40" /></a>
  <a href="index.html"><img src="../../images/thumb.jpg" height="40" alt="thumbnail" width="40" /></a>
  <a href="index.html"><img src="../../images/thumb.jpg" height="40" alt="thumbnail" width="40" /></a>	
  <a href="index.html"><img src="../../images/thumb.jpg" height="40" alt="thumbnail" width="40" /></a>
  <a href="index.html"><img src="../../images/thumb.jpg" height="40" alt="thumbnail" width="40" /></a>													
  <a href="index.html"><img src="../../images/thumb.jpg" height="40" alt="thumbnail" width="40" /></a>
  <a href="index.html"><img src="../../images/thumb.jpg" height="40" alt="thumbnail" width="40" /></a>
  <a href="index.html"><img src="../../images/thumb.jpg" height="40" alt="thumbnail" width="40" /></a>													
  <a href="index.html"><img src="../../images/thumb.jpg" height="40" alt="thumbnail" width="40" /></a>
</p>	

	  <h3> Sitemap </h3>
<p> | 

           <span style="white-space: nowrap"><a href="http://www.isaacliu.info/">Home</a> | </span>
      
           <span style="white-space: nowrap"><a href="http://www.isaacliu.info/personal.html">Personal</a> | </span>
      
           <span style="white-space: nowrap"><a href="http://www.isaacliu.info/publications.html">Publications</a> | </span>
      
           <span style="white-space: nowrap"><a href="http://www.isaacliu.info/research.html">Research</a> | </span>
      
           <span style="white-space: nowrap"><a href="http://www.isaacliu.info/resume.html">Resume</a> | </span>
      
           <span style="white-space: nowrap"><a href="http://www.isaacliu.info/blog/">Blog Entries</a> | </span>
      
  
  
  
  
  
  
  
  
  
   
</p>
	
	</div>	

	<div class="grid_4">
	  <h3>About the Site</h3>
<p>This site was created using <a href="http://webby.rubyforge.org/">webby</a>, which is a dynamic generator for static websites. The purpose of this site was for me to experiment with website generators, ruby, lightweight markup languages (<a href="http://textism.com/tools/textile/">textile</a>, <a href="http://haml-lang.com/">Haml</a>, <a href="http://daringfireball.net/projects/markdown/">Markdown</a> etc). I wanted to generate a blog like website where it was easy to update contents, it had content and layout separation, and it&#8217;s only static html pages. Then i plan to integrate more dynamic features with javascript slowly. The source code of my experiment (this website) will be kept public and up to date on <a href="http://github.com/iliu/My-Site/">github</a>. By doing so, i can also easily deploy this website (since it&#8217;s static and the pages are all in a source control repository) to any webhost. Feel free download the source to play with it and contact me if you have any questions or comments.</p>
	</div>

      </div>
      
      <div id="footer-bottom">
	
	<p class="bottom-left">			
	  &nbsp; &copy; 2010 designed by <a href="http://www.isaacliu.info">Isaac Liu</a> &nbsp; &nbsp;
	  powered by <a href="http://webby.rubyforge.org/">webby</a>&nbsp; &nbsp;
	  <a href="http://www.bluewebtemplates.com/" title="Website Templates">website templates</a> by <a href="http://www.styleshout.com/">styleshout</a>

	</p>	
	
	<p class="bottom-right">
	  <a href="http://www.isaacliu.info/index.html">Home</a> |
	  <a href="http://www.isaacliu.info/sitemap.xml">Sitemap</a> |
	  <a href="http://www.isaacliu.info/blog/rss.xml">RSS Feed</a> |						
	  <a href="http://jigsaw.w3.org/css-validator/check/referer">CSS</a> | 
	  <a href="http://validator.w3.org/check/referer">XHTML</a>
	</p>
	
      </div>	
      
    </div>
    <!-- footer ends here -->

    <!-- Used for disqus -->
    <script type="text/javascript">
      //<![CDATA[
(function() {
	var links = document.getElementsByTagName('a');
	var query = '?';
	for(var i = 0; i < links.length; i++) {
	if(links[i].href.indexOf('#disqus_thread') >= 0) {
		query += 'url' + i + '=' + encodeURIComponent(links[i].href) + '&';
	}
	}
	document.write('<script charset="utf-8" type="text/javascript" src="http://disqus.com/forums/isaacliu/get_num_replies.js' + query + '"></' + 'script>');
})();
//]]>
    </script>

  </body>
</html>
